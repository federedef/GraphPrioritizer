<%
        def order_columns(name, column)
                tab_header = @hash_vars[name].shift
                @hash_vars[name].sort!{|s1, s2| s1[column] <=> s2[column] }
                @hash_vars[name].unshift(tab_header)
        end

        if !@hash_vars['parsed_non_integrated_rank_summary'].nil?
                order_columns('parsed_non_integrated_rank_summary',0)
        end

        if !@hash_vars['parsed_integrated_rank_summary'].nil?
                order_columns('parsed_integrated_rank_summary',0)
        end

        if !@hash_vars['parsed_annotation_grade_metrics'].nil?
                order_columns('parsed_annotation_grade_metrics',0)
        end

        if !@hash_vars['parsed_annotation_grade_metrics'].nil?
                order_columns('parsed_annotation_grade_metrics',0)
        end

        #if !@hash_vars['non_integrated_rank_cdf'].nil?
        #        order_columns('non_integrated_rank_cdf',5)
        #end

         img_path="/mnt/scratch/users/bio_267_uma/federogc/executions/backupgenes/report/img/"
        
%>


<div style="width:90%; background-color:#FFFFFF; margin:50 auto; align-content: center;">
        <h1 style="text-align:center; background-color:#ecf0f1, color: powderblue; "> Analysis of the algorithm: From rankings to backup genes.</h1>

        <h2 style="text-align:center; background-color:#ecf0f1, color: powderblue;"> Ranking section </h2>


         <div style="overflow: hidden";>
                <p style="text-align:center;"><b>Ranks distribution by seed Not integrated</b></p> 
                <%=
                order_columns('non_integrated_rank_cdf',7)
                boxplot(id: 'non_integrated_rank_cdf', header: true, row_names: false, default: false, smp_attr: [7,1], group: ["group_seed"],
                                x_label: "Ranks",
                                title: "Boxplot of ranks (with no zero score) distribution",
                                config: {"xAxis" => "rank",
                                        "graphOrientation": "vertical",
                                        "colorBy" => "group_seed",
                                        "groupingFactors" =>
                                        ["group_seed","annot"]}

                        )
                        %>
        </div>


         <div style="overflow: hidden";>
                <p style="text-align:center;"><b>Ranks distribution by seed integratedr</b></p> 
                <%=
                order_columns('integrated_rank_cdf',7)
                boxplot(id: 'integrated_rank_cdf', header: true, row_names: false, default: false, smp_attr: [7,1], group: ["group_seed"],
                                x_label: "Ranks",
                                title: "Boxplot of ranks (with no zero score) distribution",
                                config: {"xAxis" => "rank",
                                        "graphOrientation": "vertical",
                                        "colorBy" => "group_seed",
                                        "groupingFactors" =>
                                        "group_seed"}

                        )
                        %>
        </div>



        <div style="overflow: hidden";>
                <p style="text-align:center;"> CDF plots of non integrated kernels </p> 
                <%= 
                if !@hash_vars['non_integrated_rank_cdf'].nil?
                        order_columns('non_integrated_rank_cdf',5)
                        scatter2D(id: "non_integrated_rank_cdf", fields: [5,6] , header: true, row_names: false, responsive: false,
                                height: '400px', width: '400px', x_label: 'percentiles', smp_attr: [0,1,2],
                                title: "cummulative distribution function plot",
                                config: {
                                        'showLegend' => true,
                                        'lineBy' => 'kernel',
                                        'colorBy' => 'kernel',
                                        'segregateVariablesBy' => 'annot'
                                        })
                end
                %>
        </div>

        <div style="overflow: hidden";>
                <p style="text-align:center;"> CDF plots of integrated kernels </p> 
                <%= 
                if !@hash_vars['integrated_rank_cdf'].nil?
                        order_columns('integrated_rank_cdf',0)
                        order_columns('integrated_rank_cdf',5)
                        scatter2D(id: "integrated_rank_cdf", fields: [5,6] , header: true, row_names: false, responsive: false,
                                height: '400px', width: '400px', x_label: 'percentiles', smp_attr: [0,1,2],
                                title: "cummulative distribution function plot",
                                config: {
                                        'showLegend' => true,
                                        'lineBy' => 'kernel',
                                        'colorBy' => 'kernel',
                                        'segregateVariablesBy' => 'integration'
                                        })
                end
                %>
        </div>

</div>